apiVersion: v1
kind: ConfigMap
metadata:
  name: ravenmaskos-config
  namespace: ravenmaskos
  labels:
    app.kubernetes.io/name: ravenmaskos
    app.kubernetes.io/component: config
data:
  # Application settings
  SERVICE_NAME: "ravenmaskos"
  ENVIRONMENT: "production"
  LOG_LEVEL: "INFO"

  # Server settings
  HOST: "0.0.0.0"
  PORT: "8000"

  # CORS settings (comma-separated)
  CORS_ORIGINS: "https://app.example.com"
  CORS_ALLOW_CREDENTIALS: "true"
  CORS_ALLOW_METHODS: "GET,POST,PUT,DELETE,PATCH"
  CORS_ALLOW_HEADERS: "Authorization,Content-Type,X-Request-ID"

  # Trusted hosts (comma-separated)
  ALLOWED_HOSTS: "api.example.com,*.example.com"

  # Rate limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_DEFAULT: "100/minute"
  RATE_LIMIT_BURST: "20/second"

  # Database settings (credentials from secrets)
  DB_HOST: "postgres.database.svc.cluster.local"
  DB_PORT: "5432"
  DB_NAME: "ravenmaskos"
  DB_SSL_MODE: "require"
  DB_POOL_SIZE: "10"
  DB_MAX_OVERFLOW: "20"
  DB_POOL_TIMEOUT: "30"

  # Redis settings
  REDIS_MAX_CONNECTIONS: "20"
  REDIS_SSL: "true"
  REDIS_SSL_CERT_REQS: "required"

  # Kafka settings
  KAFKA_BOOTSTRAP_SERVERS: "kafka.messaging.svc.cluster.local:9092"
  KAFKA_CONSUMER_GROUP: "ravenmaskos-group"
  KAFKA_AUTO_OFFSET_RESET: "earliest"
  KAFKA_SECURITY_PROTOCOL: "SASL_SSL"
  KAFKA_SASL_MECHANISM: "SCRAM-SHA-512"

  # JWT settings
  JWT_ALGORITHM: "RS256"
  JWT_ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  JWT_REFRESH_TOKEN_EXPIRE_DAYS: "7"

  # AWS settings
  AWS_REGION: "us-east-1"

  # Observability
  OTEL_ENABLED: "true"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector.observability.svc.cluster.local:4317"
  OTEL_SERVICE_NAME: "ravenmaskos"
  PROMETHEUS_ENABLED: "true"
