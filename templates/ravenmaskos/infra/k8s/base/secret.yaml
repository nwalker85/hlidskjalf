apiVersion: v1
kind: Secret
metadata:
  name: ravenmaskos-secrets
  namespace: ravenmaskos
  labels:
    app.kubernetes.io/name: ravenmaskos
    app.kubernetes.io/component: secrets
  annotations:
    # For external-secrets-operator integration
    # external-secrets.io/target: ravenmaskos-secrets
    # For secrets-store-csi-driver integration
    # secrets-store.csi.k8s.io/used: "true"
type: Opaque
# In production, these should come from:
# 1. External Secrets Operator syncing from AWS Secrets Manager
# 2. Sealed Secrets
# 3. Vault
# The values below are placeholders
stringData:
  # Database (if not using AWS Secrets Manager)
  DB_SECRET_NAME: "prod/ravenmaskos/database"
  DATABASE_URL: "postgresql+asyncpg://user:password@host:5432/db"

  # Redis
  REDIS_URL: "rediss://user:password@redis.cache.svc.cluster.local:6379/0"

  # Kafka SASL
  KAFKA_SASL_USERNAME: "ravenmaskos"
  KAFKA_SASL_PASSWORD: "change-me"

  # JWT (use RS256 key pair in production)
  JWT_SECRET_KEY: "change-me-use-rs256-in-production"

  # AWS credentials (prefer IRSA instead)
  # AWS_ACCESS_KEY_ID: ""
  # AWS_SECRET_ACCESS_KEY: ""
---
# External Secrets template for AWS Secrets Manager integration
# Uncomment and configure if using external-secrets-operator
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: ravenmaskos-external-secrets
#   namespace: ravenmaskos
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: ClusterSecretStore
#   target:
#     name: ravenmaskos-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: DATABASE_URL
#       remoteRef:
#         key: prod/ravenmaskos/database
#         property: url
#     - secretKey: REDIS_URL
#       remoteRef:
#         key: prod/ravenmaskos/redis
#         property: url
#     - secretKey: JWT_SECRET_KEY
#       remoteRef:
#         key: prod/ravenmaskos/jwt
#         property: secret_key
